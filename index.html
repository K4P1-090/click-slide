<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        * {
            box-sizing: border-box;
        }
        body{
            font-family: 'VT323', monospace;
            background-color:#102542;
            display:flex;
            justify-content:center;
            align-items: center;
            flex-direction:column;
        }
        #pf
        {
            width:364px;
            height:364px;
            border:2px solid #FFE2FE;
        }
        .container
        {
            margin-top:25px;
        }
        button{
            color: #102542;
            font-family: 'VT323', monospace;
            font-size: 18px;
            border:#FFE2FE solid 3px;
            background-color: #F87060;
            position:static;
            width:88px;
            height:27px;
            border-radius:25px;
        }
        .rozruch
        {
            width: 184px;
        }
        .field_3 {
            width: 120px;
            height: 120px;
            border: solid 1px #102542;
            float: left;
            background-image: url('ten.jpg');
            background-size: 360px 360px;
        }
        .field-4 {
            width: 90px;
            height: 90px;
            border: solid 1px #102542;
            float: left;
            background-image: url('ten.jpg');
            background-size: 360px 360px;
        }
        .field-5 {
            width: 72px;
            height: 72px;
            border: solid 1px #102542;
            float: left;
            background-image: url('ten.jpg');
            background-size: 360px 360px;
        }
        .field-6 {
            width: 60px;
            height: 60px;
            border: solid 1px #102542;
            float: left;
            background-image: url('ten.jpg');
            background-size: 360px 360px;
        }
        .magia
        {
            background-color:#102542;
            background-image:none;
        }
        h1
        {
            color:#F87060;
            font-size: 66px;
            margin-top:5px;
            margin-bottom:10px;
        }
        .border1
        {
            padding:2px;
            border: 2px solid #FFE2FE;
        }
        .margin
        {
            margin-top:25px;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", (event) => {
            game = {
                temp1: null,
                temp2: null,
                arr: [],
                x: null,
                y: null,
                pf: document.getElementById("pf"),
                drei: (n) => {
                    console.log(game.pf);
                    game.arr = [];
                    for (let i = 0; i < n; i++) {
                        game.arr.push([]);
                        for (j = 0; j < n; j++) {
                            let el = document.createElement("div");
                            el.classList.add("field_3");
                            //el.classList.add("number" + i + j);
                            el.id="number_" + i +"_"+ j;
                            el.style=`background-position: ${-120*j}px ${-120*i}px`;
                            el.onclick = game.flop
                            game.arr[i].push({el:el, isEmpty:false});
                            if (j == n-1 && i == n-1){
                                //el.classList.add("magia");
                                game.arr[i][j].isEmpty = true
                            }
                        }
                    }
                    game.render();
                },
                vier: (n) => {
                    console.log(game.pf);
                    game.arr = [];
                    for (let i = 0; i < n; i++) {
                        game.arr.push([]);
                        for (j = 0; j < n; j++) {
                            let el = document.createElement("div");
                            el.classList.add("field_4");
                            //el.classList.add("number" + i + j);
                            el.id="number_" + i +"_"+ j;
                            el.style=`background-position: ${-90*j}px ${-90*i}px`;
                            el.onclick = game.flop
                            game.arr[i].push({el:el, isEmpty:false});
                            if (j == n-1 && i == n-1){
                                //el.classList.add("magia");
                                game.arr[i][j].isEmpty = true
                            }
                        }
                    }
                    game.render();
                },
                funf: (n) => {
                    console.log(game.pf);
                    game.arr = [];
                    for (let i = 0; i < n; i++) {
                        game.arr.push([]);
                        for (j = 0; j < n; j++) {
                            let el = document.createElement("div");
                            el.classList.add("field_5");
                            //el.classList.add("number" + i + j);
                            el.id="number_" + i +"_"+ j;
                            el.style=`background-position: ${-72*j}px ${-72*i}px`;
                            el.onclick = game.flop
                            game.arr[i].push({el:el, isEmpty:false});
                            if (j == n-1 && i == n-1){
                                //el.classList.add("magia");
                                game.arr[i][j].isEmpty = true
                            }
                        }
                    }
                    game.render();
                },
                sechs: (n) => {
                    console.log(game.pf);
                    game.arr = [];
                    for (let i = 0; i < n; i++) {
                        game.arr.push([]);
                        for (j = 0; j < n; j++) {
                            let el = document.createElement("div");
                            el.classList.add("field_6");
                            //el.classList.add("number" + i + j);
                            el.id="number_" + i +"_"+ j;
                            el.style=`background-position: ${-60*j}px ${-60*i}px`;
                            el.onclick = game.flop
                            game.arr[i].push({el:el, isEmpty:false});
                            if (j == n-1 && i == n-1){
                                //el.classList.add("magia");
                                game.arr[i][j].isEmpty = true
                            }
                        }
                    }
                    game.render();
                },
                flop: function () {
                    game.x = this.id.split("_")[2];
                    game.y = this.id.split("_")[1];
                    game.xycheck = this.classList.split("_")[1];
                    console.log(game.x, game.y);
                    console.log(game.xycheck);
                    console.log(game.arr[game.x][game.y].isEmpty);
                    if (game.arr[parseInt(game.x) + 1][game.y].isEmpty == true && game.x != game.temp1) {
                        console.log("l:", true);
                        game.temp1 = game.x;
                        game.temp2 = game.y;
                    }
                    if (game.arr[game.x][parseInt(game.y) + 1].isEmpty == true && game.y != game.temp2) {
                        console.log("l:", true);
                        game.temp1 = game.x;
                        game.temp2 = game.y;
                    }
                },
                render: () => {
                    console.log("rend", game.pf);
                    game.pf.innerHTML = "";
                    for (let i = 0; i < game.arr.length; i++) {
                        for (j = 0; j < game.arr[i].length; j++) {
                            if (game.arr[i][j].isEmpty == true) {
                                game.arr[i][j].el.classList.add("magia");
                            }
                            game.pf.appendChild(game.arr[i][j].el);
                        }
                    }
                },
                checker: () => {
                    let emptySquare = document.querySelector('.magia');
                    let emptySquareX = emptySquare.id.split("_")[2];
                    let emptySquareY = emptySquare.id.split("_")[1];
                    let adjacentSquares = [
                        document.querySelector(`#number_${emptySquareY-1}_${emptySquareX}`),
                        document.querySelector(`#number_${emptySquareY+1}_${emptySquareX}`),
                        document.querySelector(`#number_${emptySquareY}_${emptySquareX-1}`),
                        document.querySelector(`#number_${emptySquareY}_${emptySquareX+1}`)
                    ];
                    for (let i = 0; i < adjacentSquares.length; i++) {
                        if (adjacentSquares[i] !== null) {
                            adjacentSquares[i].classList.add('adjacent');
                            adjacentSquares[i].onclick = game.switchSquares;
                        }
                    }
                },
                switchSquares: function () {
                    let clickedSquareX = this.id.split("_")[2];
                    let clickedSquareY = this.id.split("_")[1];
                    let emptySquare = document.querySelector('.magia');
                    let emptySquareX = emptySquare.id.split("_")[2];
                    let emptySquareY = emptySquare.id.split("_")[1];
                    let clickedSquare = game.arr[clickedSquareY][clickedSquareX].el;
                    let emptySquareClone = emptySquare.cloneNode(true);
                    let clickedSquareClone = clickedSquare.cloneNode(true);
                    emptySquare.parentNode.replaceChild(clickedSquareClone, emptySquare);
                    clickedSquare.parentNode.replaceChild(emptySquareClone, clickedSquare);
                    game.arr[clickedSquareY][clickedSquareX].el = emptySquareClone;
                    game.arr[emptySquareY][emptySquareX].el = clickedSquareClone;
                    game.arr[clickedSquareY][clickedSquareX].isEmpty = true;
                    game.arr[emptySquareY][emptySquareX].isEmpty = false;
                    emptySquareClone.classList.remove('magia');
                    clickedSquareClone.classList.add('magia');
                    let adjacentSquares = document.querySelectorAll('.adjacent');
                    for (let i = 0; i < adjacentSquares.length; i++) {
                        adjacentSquares[i].classList.remove('adjacent');
                        adjacentSquares[i].onclick = null;
                    }
                    game.checkWin();
                },
                checkWin: () => {
                    let win = true;
                    for (let i = 0; i < game.arr.length; i++) {
                        for (j = 0; j < game.arr[i].length; j++) {
                            if (game.arr[i][j].isEmpty == false) {
                                let id = game.arr[i][j].el.id;
                                let correctX = id.split("_")[2];
                                let correctY = id.split("_")[1];
                                if (i != correctY || j != correctX) {
                                    win = false;
                                }
                            }
                        }
                    }
                    if (win) {
                        alert('You win!');
                    }
                }
            }
        })
    </script>
</head>
 
<body>
    <h1>#YOMI_Hustle #Ukladanka #Trudne</h1>
    <div class="border1">
        <div class="border1" style="width:216px; height:216px">
            <img src="ten.jpg" class="border1">
        </div>
    </div>
    <div class="container">
        <button onclick="game.drei(3)">3x3</button>
        <button onclick="game.vier(4)">4x4</button>
        <button onclick="game.funf(5)">5x5</button>
        <button onclick="game.sechs(6)">6x6</button>
    </div>
    <div class="container">
        <button class="rozruch">Start</button>
        <button class="rozruch">Restart</button>
    </div>
    <div class="margin border1">
        <div class="border1" >
            <div id="pf"></div>
        </div>
    </div>
</body>
 
</html>